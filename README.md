# VT-pkg
Well, this is just a simple example of how you can support out of the box [_Independent Terminal Emulators_][VT] for your **nodejs CLI** application when generating executables with npm [pkg][pkg].

Generated package will work both on **windows** and **Linux**.

## Table of Contest
- [Usage](#usage)
- [Important Notes](#important-notes)
-------------------------

## Usage
1. Make sure you have globally installed **"pkg"** module from npm.
1. Clone repo: `git clone https://github.com/AndoGhevian/VT-pkg.git`
1. Change current directory: `cd VT-pkg`
1. Run **packing script** and get **_"vt-pkg"_** executable in current folder: `npm run pkgpack`
1. Move it anywhere you want and run created executable: `./vt-pkg`

You see it works from anywhere, it automatically finds and runs **terminal**, and executes main.js script from **Internal FileSystem** in this new opened terminal. Vuola!:)

**Be sure to read Important Notes section!!**

## Important Notes
1. If you want to access your **"Internal node"** from your generated by **pkg** executable, when trying to spawn another `node` process, or trying to use that **"Internal node"** from spawned **terminal** as we doe's,  simply use instead of `node` your executable path.
    > Use `$ /path/to/pkg/generated-exe your-script.js`, Where:
    > 1. `/path/to/pkg/generated-exe` - Replacement for original **"node"**.
    > 1. `your-script.js` - Script which you want to execute with **"Internal node"** instead of your system-wide **"node"**.
    >
    e.g.
    ```javascript
    const child = require('child_process')

    // this hold's executable path.
    const internalNode = process.execPath

    // when project is packed, this refer to internal filesystem.
    // See: https://www.npmjs.com/package/pkg#snapshot-filesystem
    const internalFs = __dirname 

    const cmdProcess = child.spawn(`${internalNode}`, [`${internalFs}/main.js`], {
        stdio: 'inherit'
    })
    ```
1. Remember that first argument of **"Internal node"** if provided, must allways be existing file path, eather from your actual _**FileSystem**_ or from _**Internal FileSystem**_( See [Snapshot filesystem][snapshotFs] ): i.e. _--arg1_, _-arg1_, or anything else, to nonexisting file, will lead to fail for first argument.


[VT]: https://en.wikipedia.org/wiki/Terminal_emulator
[pkg]: https://www.npmjs.com/package/pkg
[snapshotFs]: https://www.npmjs.com/package/pkg#snapshot-filesystem